<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Penunjang Susenas</title>
    <style>
        /* Aturan umum untuk tabel */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            width: 50%;
            padding: 8px;
            text-align: center; /* Pusatkan secara horizontal */
            vertical-align: middle; /* Pusatkan secara vertikal */
            border: 1px solid #ddd;
        }

        /* Agar teks di header dan sel terlihat jelas */
        th {
            background-color: #f2f2f2;
        }

        h4 {
            background-color:rgb(142, 221, 140);
        }

        tr:nth-child(even) {
            background-color:rgba(242, 242, 242, 0.6); /* Warna untuk baris genap */
        }

        tr:nth-child(odd) {
            background-color: #ffffff; /* Warna untuk baris ganjil */
        }

        /* Responsif: Kolom akan diatur ulang di perangkat mobile */
        @media (max-width: 600px) {
            table, thead, tbody, th, td, tr {
                display: block;
            }

            th {
                background-color: #f9f9f9;
                font-weight: bold;
                text-align: center;
                padding: 10px;
            }

            td {
                display: flex;
                justify-content: space-between;
                padding: 10px;
                border: none;
                position: relative;
            }

            td::before {
                content: attr(data-label);
                position: absolute;
                left: 0;
                top: 10px;
                font-weight: bold;
            }

            tr {
                margin-bottom: 10px;
                border-bottom: 1px solid #ddd;
            }
        }

        /* Notifikasi untuk meminta perubahan orientasi */
        .orientation-notification {
            display: none;
            background-color: #f9e5e5;
            color: #d9534f;
            padding: 15px;
            border: 1px solid #d9534f;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        /* Tampilan saat notifikasi muncul */
        .show-notification {
            display: block;
        }
    </style>
</head>
<body>

    <!-- Notifikasi orientasi -->
    <div id="orientationNotification" class="orientation-notification">
        <p>Untuk pengalaman terbaik, harap putar layar Anda ke mode <strong>landscape</strong>.</p>
    </div>

    <h4 style="text-align:center;"><strong>BLOK VI. REKAPITULASI PENERIMAAN DAN PENGELUARAN RUMAH TANGGA SELAMA SETAHUN TERAKHIR (DALAM RUPIAH)</strong></h4>

    <table>
        <thead>
            <tr>
                <th>Rincian Penerimaan</th>
                <th>Nilai</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>(1)</td>
                <td>(2)</td>
            </tr>
            <tr>
                <td>1. Upah dan Gaji
                <br><strong>Blok V.A Baris Jumlah Kolom (5)+(6)+(7)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-1" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>2. Pendapatan/Surplus dari Usaha Rumah Tangga
                <br><strong>Blok V.B Baris Jumlah Kolom (7)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-2" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>3. Pendapatan/Surplus dari Produksi Rumah Tangga yang Dikonsumsi/Digunakan Sendiri
                <br><strong>Blok V.C Baris Jumlah Kolom (4)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-3" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>4. Pendapatan Kepemilikan yang Diterima
                <br><strong>Blok V.D Baris Jumlah Kolom (2)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-4" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>5. Transfer Berjalan (selain aset) Diterima
                <br><strong>Blok V.E Baris Jumlah Kolom (2)+(3)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-5" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>6. Transfer Modal/Aset Diterima
                <br><strong>Blok V.F Baris Jumlah Kolom (2)+(3)</strong></td>
                <td><input type="text" class="value-input" id="penerimaan-6" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr class="total" style="background-color:rgb(209, 208, 119)">
                <td>Total</td>
                <td id="total-penerimaan">0</td>
            </tr>
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>Rincian Pengeluaran</th>
                <th>Nilai</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>(3)</td>
                <td>(4)</td>
            </tr>
            <tr>
                <td>1. Pengeluaran Konsumsi Rumah Tangga
                <br><strong>Blok IV.3. Rincian 9 Kolom (3) dikali 12</strong></td>
                <td><input type="text" class="value-input" id="pengeluaran-1" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>2. Pendapatan Kepemilikan yang Dibayar
                <br><strong>Blok V.D Baris Jumlah Kolom (3)</strong></td>
                <td><input type="text" class="value-input" id="pengeluaran-2" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>3. Transfer Berjalan (selain aset) Dibayar
                <br><strong>Blok V.E Baris Jumlah Kolom (4)+(5)</strong></td>
                <td><input type="text" class="value-input" id="pengeluaran-3" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>4. Transfer Modal/Aset Dibayar
                <br><strong>Blok V.F Baris Jumlah Kolom (4)+(5)</strong></td>
                <td><input type="text" class="value-input" id="pengeluaran-4" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>5. Total Aset Neto
                <br><strong>Blok V.G Rincian Jumlah Kolom (4)</strong></td>
                <td><input type="text" class="value-input" id="pengeluaran-5" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr class="total" style="background-color:rgb(209, 208, 119)">
                <td>Total</td>
                <td id="total-pengeluaran">0</td>
            </tr>
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th  style="background-color:rgb(218, 215, 63)">Selisih Penerimaan dan Pengeluaran [Jumlah Kolom (2) -Jumlah Kolom (4)]</th>
                <th  id="selisih"  style="background-color:rgb(218, 215, 63)">0</th>
            </tr>
        </thead>
    </table>

    <h4 style="text-align:center;"><strong>BLOK VII. TRANSAKSI KEUANGAN RUMAH TANGGA SELAMA SETAHUN TERAKHIR (DALAM RUPIAH)</strong></h4>

    <table>
        <thead>
            <tr>
                <th>Rincian Penerimaan</th>
                <th>Nilai</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>(1)</td>
                <td>(2)</td>
            </tr>
            <tr>
                <td  style="background-color:rgb(68, 228, 62)">1. Pengambilan Uang Tunai dan Tabungan</td>
                <td   style="background-color:rgb(68, 228, 62)" id="spesial" >0</td>
            </tr>
            <tr>
                <td>2. Meminjam Uang</td>
                <td><input type="text" class="value-input" id="input-2" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>3. Menerima Pembayaran Kredit Barang (Usaha Rumah Tangga)</td>
                <td><input type="text" class="value-input" id="input-3" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>4. Kredit Barang</td>
                <td><input type="text" class="value-input" id="input-4" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>5. Lainnya (Pengambilan Piutang, Menggadaikan Barang, Mendapat Arisan, Klaim Asuransi Jiwa/Pendidikan, dll</td>
                <td><input type="text" class="value-input" id="input-5" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr class="total" style="background-color:rgb(209, 208, 119)">
                <td>Total</td>
                <td id="total-input">0</td>
            </tr>
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>Rincian Pengeluaran</th>
                <th>Nilai</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>(3)</td>
                <td>(4)</td>
            </tr>
            <tr>
                <td>1. Menyimpan Uang Tunai dan Menabung</td>
                <td><input type="text" class="value-input" id="output-1" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>2. Membayar Hutang</td>
                <td><input type="text" class="value-input" id="output-2" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>3. Memberikan Kredit Barang (Usaha Rumah Tangga)</td>
                <td><input type="text" class="value-input" id="output-3" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>4. Membayar Kredit Barang</td>
                <td><input type="text" class="value-input" id="output-4" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr>
                <td>5. Lainnya (Meminjam Uang, Menebus Barang, Gadaian, Membayar Arisan, Premi Asuransi Jiwa/Pendidikan, dll.)</td>
                <td><input type="text" class="value-input" id="output-5" value="0" oninput="formatAndCalculate(this)"></td>
            </tr>
            <tr class="total"  style="background-color:rgb(209, 208, 119)">
                <td>Total</td>
                <td id="total-output">0</td>
            </tr>
        </tbody>
    </table>
    <table>
        <thead>
            <tr>
                <th  style="background-color:rgb(218, 215, 63)">Selisih Transaksi Keuangan Rincian Pengeluaran dan Penerimaan[Jumlah Kolom (4) -Jumlah Kolom (2)]</th>
                <th  id="selisih-2"  style="background-color:rgb(218, 215, 63)">0</th>
            </tr>
        </thead>
    </table>


<script>
    // Fungsi untuk memformat angka dengan pemisah ribuan
    function formatNumber(value) {
        return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // Fungsi untuk menghapus format angka (mengembalikan hanya angka)
    function unformatNumber(value) {
        return value.replace(/\./g, '');
    }

    // Fungsi untuk memformat input dan menghitung total
    function formatAndCalculate(input) {
        // Hapus pemisah ribuan sebelum mengolah nilai
        const rawValue = unformatNumber(input.value);

        // Pastikan nilai adalah angka valid, jika tidak set ke 0
        const numericValue = parseFloat(rawValue) || 0;

        // Perbarui input dengan nilai yang diformat
        input.value = formatNumber(numericValue);

        // Hitung total semua input
        calculateTotal();
    }

    function calculateTotal() {
        // Ambil semua elemen input dengan class 'value-input'
        const inputs = document.querySelectorAll('.value-input');
        let totalPenerimaan = 0;
        let totalPengeluaran = 0;
        let totalInputSub = 0;
        let totalOutput = 0;

        // Loop melalui setiap input untuk menjumlahkan nilai pemasukan dan pengeluaran secara terpisah
        inputs.forEach(input => {
            const rawValue = unformatNumber(input.value); // Hapus format
            const numericValue = parseFloat(rawValue) || 0; // Pastikan nilai valid

            // Memeriksa apakah input ini untuk pemasukan atau pengeluaran berdasarkan ID
            if (input.id.includes('penerimaan')) {
                totalPenerimaan += numericValue; // Tambahkan ke total pemasukan
            } else if (input.id.includes('pengeluaran')) {
                totalPengeluaran += numericValue; // Tambahkan ke total pengeluaran
            } else if (input.id.includes('input')) {
                totalInputSub += numericValue; // Tambahkan ke total pengeluaran
            } else if (input.id.includes('output')) {
                totalOutput += numericValue; // Tambahkan ke total output
            }
        });

        // Tampilkan hasil dengan format pemisah ribuan
        document.getElementById('total-penerimaan').textContent = formatNumber(totalPenerimaan);
        document.getElementById('total-pengeluaran').textContent = formatNumber(totalPengeluaran);

        // Menghitung dan menampilkan selisih
        const selisih = totalPenerimaan - totalPengeluaran;
        document.getElementById('selisih').textContent = formatNumber(selisih);
        document.getElementById('selisih-2').textContent = formatNumber(selisih);

        const totalInput = totalOutput - selisih;
        document.getElementById('total-input').textContent = formatNumber(totalInput);
        document.getElementById('total-output').textContent = formatNumber(totalOutput);

        const spesial = totalInput - totalInputSub;
        document.getElementById('spesial').textContent = formatNumber(spesial);
    }

    // Menambahkan event listener untuk pindah antar input saat menekan Enter
    document.querySelectorAll('.value-input').forEach((input, index, inputs) => {
        input.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault(); // Mencegah aksi default tombol Enter
                const nextInput = inputs[index + 1]; // Ambil input berikutnya
                if (nextInput) {
                    nextInput.focus(); // Pindahkan fokus ke input berikutnya
                }
            }
        });
    });
</script>


<script>
    // Fungsi untuk mengecek orientasi perangkat
    function checkOrientation() {
        const notification = document.getElementById('orientationNotification');

        // Cek apakah orientasi portrait
        if (window.innerHeight > window.innerWidth) {
            notification.classList.add('show-notification');
        } else {
            notification.classList.remove('show-notification');
        }
    }

    // Jalankan saat halaman dimuat dan setiap kali orientasi berubah
    window.addEventListener('load', checkOrientation);
    window.addEventListener('orientationchange', checkOrientation);

    // Panggil checkOrientation setiap kali ukuran jendela berubah
    window.addEventListener('resize', checkOrientation);
</script>

</body>
</html>
